<?xml version="1.0" encoding="UTF-8"?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xml:lang="ru"
    xml:id="fblangref-ddl-domain">
    <info>
        <title>DOMAIN</title>
        <keywordset>
            <keyword>DOMAIN</keyword>
        </keywordset>
    </info>
    <para>Домен (Domain) — один из объектов реляционной базы данных, при создании которого можно
        задать некоторые характеристики, а затем использовать ссылку на домен при определении
        столбцов таблиц, объявлении локальных переменных, входных и выходных аргументов в модулях
        PSQL. </para>
    <para>В данном разделе рассматриваются синтаксис операторов создания, модификации и удаления
        доменов. Подробное описание доменов и их использования можно прочесть в главе <link
            linkend="fblangref-datatypes-domain">Пользовательские типы данных — домены</link>. </para>
    <section xml:id="fblangref-ddl-domain-create">
        <info>
            <title>CREATE DOMAIN</title>
            <keywordset>
                <keyword>CREATE DOMAIN</keyword>
            </keywordset>
        </info>
        <indexterm>
            <primary>CREATE DOMAIN</primary>
        </indexterm>
        <formalpara>
            <title>Назначение:</title>

            <para>Создание нового домена.</para>
        </formalpara>

        <formalpara>
            <title>Доступно в:</title>

            <para>DSQL, ESQL.</para>
        </formalpara>

        <formalpara>
            <title>Синтаксис:</title>
            <para>
                <programlisting>
CREATE DOMAIN <replaceable>name</replaceable> [AS] <replaceable>&lt;datatype&gt;</replaceable>
  [DEFAULT {<replaceable>literal</replaceable> | NULL | <replaceable>&lt;context_var&gt;</replaceable>}]
  [NOT NULL] [CHECK (<replaceable>&lt;dom_condition&gt;</replaceable>)]
  [COLLATE <replaceable>collation</replaceable>];

<replaceable>&lt;datatype&gt;</replaceable> ::= 
    <replaceable>&lt;scalar_datatype&gt;</replaceable> | <replaceable>&lt;blob_datatype&gt;</replaceable> | <replaceable>&lt;array_datatype&gt;</replaceable>                    
                    
<replaceable>&lt;scalar_datatype&gt;</replaceable> ::=  <link xmlns:xlink="http://www.w3.org/1999/xlink" linkend="fblangref-datatypes-declare-scalar">См. Синтаксис скалярных типов данных</link>
                    
<replaceable>&lt;blob_datatype&gt;</replaceable> ::= <link xmlns:xlink="http://www.w3.org/1999/xlink" linkend="fblangref-datatypes-declare-blob">См. Синтаксис типа данных BLOB</link>          
                    
<replaceable>&lt;array_datatype&gt;</replaceable> ::= <link xmlns:xlink="http://www.w3.org/1999/xlink" linkend="fblangref-datatypes-declare-array">См. Синтаксис массивов</link>   

<replaceable>&lt;dom_condition&gt;</replaceable> ::= 
    <replaceable>&lt;val&gt;</replaceable> <replaceable>&lt;operator&gt;</replaceable> <replaceable>&lt;val&gt;</replaceable>
  | <replaceable>&lt;val&gt;</replaceable> [NOT] BETWEEN <replaceable>&lt;val&gt;</replaceable> AND <replaceable>&lt;val&gt;</replaceable>
  | <replaceable>&lt;val&gt;</replaceable> [NOT] IN (<replaceable>&lt;val&gt;</replaceable> [, <replaceable>&lt;val&gt;</replaceable> ...] | <replaceable>&lt;select_list&gt;</replaceable>)
  | <replaceable>&lt;val&gt;</replaceable> IS [NOT] NULL
  | <replaceable>&lt;val&gt;</replaceable> IS [NOT] DISTINCT <replaceable>&lt;val&gt;</replaceable>
  | <replaceable>&lt;val&gt;</replaceable> IS [NOT] {TRUE | FALSE | UNKNOWN}
  | <replaceable>&lt;val&gt;</replaceable> [NOT] CONTAINING <replaceable>&lt;val&gt;</replaceable>
  | <replaceable>&lt;val&gt;</replaceable> [NOT] STARTING [WITH] <replaceable>&lt;val&gt;</replaceable>
  | <replaceable>&lt;val&gt;</replaceable> [NOT] LIKE <replaceable>&lt;val&gt;</replaceable> [ESCAPE <replaceable>&lt;val&gt;</replaceable>]
  | <replaceable>&lt;val&gt;</replaceable> [NOT] SIMILAR TO <replaceable>&lt;val&gt;</replaceable> [ESCAPE <replaceable>&lt;val&gt;</replaceable>]
  | <replaceable>&lt;val&gt;</replaceable> <replaceable>&lt;operator&gt;</replaceable> {ALL | SOME | ANY} (<replaceable>&lt;select_list&gt;</replaceable>)
  | [NOT] EXISTS (<replaceable>&lt;select_expr&gt;</replaceable>)
  | [NOT] SINGULAR (<replaceable>&lt;select_expr&gt;</replaceable>)
  | (<replaceable>&lt;dom_condition&gt;</replaceable>)
  | NOT <replaceable>&lt;dom_condition&gt;</replaceable>
  | <replaceable>&lt;dom_condition&gt;</replaceable> OR <replaceable>&lt;dom_condition&gt;</replaceable>
  | <replaceable>&lt;dom_condition&gt;</replaceable> AND <replaceable>&lt;dom_condition&gt;</replaceable>


<replaceable>&lt;operator&gt;</replaceable> ::= 
    &lt;> | != | ^= | ~= | = | &lt; | > | &lt;= | >=
  | !&lt; | ^&lt; | ~&lt; | !> | ^> | ~>

<replaceable>&lt;val&gt;</replaceable> ::= {
    VALUE
  | <replaceable>&lt;literal&gt;</replaceable>
  | <replaceable>&lt;context_var&gt;</replaceable>
  | <replaceable>&lt;expression&gt;</replaceable>
  | NULL
  | NEXT VALUE FOR <replaceable>genname</replaceable>
  | GEN_ID(<replaceable>genname</replaceable>, <replaceable>&lt;val&gt;</replaceable>)
  | CAST(<replaceable>&lt;val&gt;</replaceable> AS <replaceable>&lt;cast_type&gt;</replaceable>)
  | (<replaceable>&lt;select_one&gt;</replaceable>)
  | func(<replaceable>&lt;val&gt;</replaceable> [, <replaceable>&lt;val&gt;</replaceable> ...])
}

<replaceable>&lt;cast_type&gt;</replaceable> ::=
   <replaceable>&lt;datatype&gt;</replaceable> 
  | [TYPE OF] <replaceable>domain</replaceable> 
  | TYPE OF COLUMN <replaceable>rel</replaceable>.<replaceable>col</replaceable>                       
                        
</programlisting>
            </para>
        </formalpara>
        <para>
            <table frame="all">
                <title>Параметры оператора CREATE DOMAIN</title>
                <?dbfo keep-together='auto'?>
                <tgroup cols="2">
                    <colspec colname="c1" colnum="1" colwidth="1.2*" align="left"/>
                    <colspec colname="c2" colnum="2" colwidth="2.8*" align="justify"/>
                    <thead>
                        <row>
                            <entry align="center">Параметр</entry>
                            <entry align="center">Описание</entry>
                        </row>
                    </thead>
                    <tbody>
                        <row>
                            <entry>
                                <replaceable>name</replaceable>
                            </entry>
                            <entry>
                                <para>Имя домена. Может содержать до 63 символов. </para>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <replaceable>datatype</replaceable>
                            </entry>
                            <entry>
                                <para>Тип данных SQL. </para>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <replaceable>literal</replaceable>
                            </entry>
                            <entry>
                                <para>Литерал. </para>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <replaceable>context_var</replaceable>
                            </entry>
                            <entry>
                                <para>Любая контекстная переменная, тип которой совместим с типом
                                    данных  домена.</para>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <replaceable>dom_condition</replaceable>
                            </entry>
                            <entry>
                                <para>Условие домена. </para>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <replaceable>collation</replaceable>
                            </entry>
                            <entry>
                                <para>Порядок сортировки. </para>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <replaceable>charset</replaceable>
                            </entry>
                            <entry>
                                <para>Набор символов. </para>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <replaceable>select_one</replaceable>
                            </entry>
                            <entry>
                                <para>Оператор SELECT выбирающий один столбец и возвращающий только
                                    одну строку. </para>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <replaceable>select_list</replaceable>
                            </entry>
                            <entry>
                                <para>Оператор SELECT выбирающий один столбец и возвращающий ноль и
                                    более строк.</para>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <replaceable>select_expr</replaceable>
                            </entry>
                            <entry>
                                <para>Оператор SELECT выбирающий несколько столбцов и возвращающий
                                    ноль и более строк.</para>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <replaceable>experssion</replaceable>
                            </entry>
                            <entry>
                                <para>Выражение. </para>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <replaceable>genname</replaceable>
                            </entry>
                            <entry>
                                <para>Имя последовательности (генератора). </para>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <replaceable>func</replaceable>
                            </entry>
                            <entry>
                                <para>Скалярная функция. </para>
                            </entry>
                        </row>
                    </tbody>
                </tgroup>
            </table>
        </para>

        <para>Оператор <database>CREATE DOMAIN</database> создаёт новый домен.</para>
        <para>В качестве типа домена можно использовать любой тип данных SQL. Для любого типа данных
            кроме BLOB можно указать размерность массива, если домен должен быть массивом.
            Размерность массива указывается в квадратных скобках. Чтобы не перепутать их с
            символами, означающими необязательные элементы, они выделены жирным шрифтом. При
            указании размерности массива указываются два числа через двоеточие. Первое число
            означает начальный номер элемента массива, второе – конечный. Если указано только одно
            число, то оно означает последний номер в элементе массива, а первым номером считается 1.
            Если у массива два и более измерения, то они перечисляются через запятую.</para>
        <indexterm>
            <primary>CREATE DOMAIN</primary>
            <secondary>CHARACTER SET</secondary>
        </indexterm>
        <para>Для типов <database class="datatype">CHAR</database>, <database class="datatype"
                >VARCHAR</database> и <database class="datatype">BLOB</database> с подтипом text
            можно указать набор символов в предложении <database>CHARACTER SET</database>. Если
            набор символов не указан, то по умолчанию принимается тот набор символов, который был
            указан при создании базы данных.</para>
        <warning>
            <para>Если же при создании базы данных не был указан набор символов, то при создании
                домена по умолчанию принимается набор символов NONE. В этом случае данные хранятся и
                извлекаются, так как они были поданы. В столбец, основанный на таком домене, можно
                загружать данные в любой кодировке, но невозможно загрузить эти данные в столбец с
                другой кодировкой. Транслитерация не выполняется между исходными и конечными
                кодировками, что может приводить к ошибкам. </para>
        </warning>
        <indexterm>
            <primary>CREATE DOMAIN</primary>
            <secondary>DEFAULT</secondary>
        </indexterm>
        <para>Необязательное предложение <database>DEFAULT</database> позволяет указать значение по
            умолчанию для домена. Это значение будет помещено в столбец таблицы, который ссылает на
            данный домен, при выполнении оператора <database>INSERT</database>, если значение не
            будет указано для этого столбца. Локальные переменные и аргументы PSQL модулей, которые
            ссылаются на этот домен, будут инициализированы значением по умолчанию. В качестве
            значения по умолчанию может быть литерал совместимый по типу, неизвестное значение NULL
            и контекстная переменная, тип которой совместим с типом домена.</para>
        <indexterm>
            <primary>CREATE DOMAIN</primary>
            <secondary>NOT NULL</secondary>
        </indexterm>
        <para>Предложение <database>NOT NULL</database> запрещает столбцам и переменным, основанным
            на домене, присваивать значение NULL. </para>
        <indexterm>
            <primary>CREATE DOMAIN</primary>
            <secondary>CHECK</secondary>
        </indexterm>
        <para>Необязательное предложение <database>CHECK</database> задаёт ограничение домена.
            Ограничение домена задаёт условия, которому должны удовлетворять значения столбцов
            таблицы или переменных, которые ссылаются на данный домен. Условие должно быть помещено
            в круглые скобки. Условие — это логическое выражение, называемое также предикат, которое
            может возвращать значения TRUE (истина), FALSE (ложь) и UNKNOWN (неизвестно). Условие
            считается выполненным, если предикат возвращает значение TRUE или UNKNOWN (эквивалент
            NULL). Если предикат возвращает FALSE, то значение не будет принято. </para>
        <para>Ключевое слово <database>VALUE</database> в ограничении домена является заменителем
            столбца таблицы, который основан на данном домене, или переменной PSQL модуля. Оно
            содержит значение, присваиваемое переменной или столбцу таблицы. Ключевое слово VALUE
            может быть использовано в любом месте ограничения <database>CHECK</database>, но обычно
            его используют в левой части условия. </para>
        <indexterm>
            <primary>CREATE DOMAIN</primary>
            <secondary>COLLATE</secondary>
        </indexterm>
        <para>Необязательное предложение <database>COLLATE</database> позволяет задать порядок
            сортировки, если домен основан на одном из строковых типов данных (за исключением
                <database class="datatype">BLOB</database>). Если порядок сортировки не указан, то
            по умолчанию принимается порядок сортировки умалчиваемый для указанного набора
            сортировки при создании домена. </para>
        <section xml:id="fblangref-ddl-domain-create-who">
            <title>Кто может создать домен?</title>

            <para>Выполнить оператор <database>CREATE DOMAIN</database> могут: <itemizedlist
                    spacing="compact">
                    <listitem>
                        <para><link linkend="fblangref-security-administrators"
                                >Администраторы</link></para>
                    </listitem>
                    <listitem>
                        <para>Пользователи с привилегией <database>CREATE DOMAIN</database>. </para>
                    </listitem>
                </itemizedlist>
            </para>

            <para>Пользователь, создавший домен, становится его владельцем.</para>
        </section>
        <section xml:id="fblangref-ddl-domain-create-examples">
            <title>Примеры</title>
            <example>
                <title>Создание домена, который может принимать значения больше 1000.</title>

                <para>
                    <programlisting language="sql"> 
<![CDATA[                     
CREATE DOMAIN CUSTNO AS
INTEGER DEFAULT 10000
CHECK (VALUE > 1000);  
]]>  
                </programlisting>
                </para>
            </example>
            <example>
                <title>Создание домена, который может принимать значения 'Да' и 'Нет'.</title>

                <para>
                    <programlisting language="sql"> 
CREATE DOMAIN D_BOOLEAN AS
CHAR(3) CHECK (VALUE IN ('Да', 'Нет'));                   
                </programlisting>
                </para>
            </example>
            <example>
                <title>Создание домена с набором символов UTF8 и порядком сортировки
                    UNICODE_CI_AI.</title>

                <para>
                    <programlisting language="sql"> 
CREATE DOMAIN FIRSTNAME AS
VARCHAR(30) CHARACTER SET UTF8
COLLATE UNICODE_CI_AI;                  
                </programlisting>
                </para>
            </example>
            <example>
                <title>Создание домена со значением по умолчанию.</title>

                <para>
                    <programlisting language="sql"> 
CREATE DOMAIN D_DATE AS
DATE DEFAULT CURRENT_DATE
NOT NULL;                
                </programlisting>
                </para>
            </example>
            <example>
                <title>Создание домена, определённого как массив из 2 элементов.</title>

                <para>Создание домена, определённого как массив из 2 элементов типа NUMERIC(18, 3),
                    нумерация элементов начинается с 1.</para>
                <para>
                    <programlisting language="sql"> 
CREATE DOMAIN D_POINT AS
NUMERIC(18, 3) [2];               
                </programlisting>
                </para>
            </example>
            <note>
                <para>Вы можете использовать домены определённые как массив только для определения
                    столбцов таблиц. Вы не можете использовать такие домены для определения
                    локальных переменных и аргументов PSQL модулей.</para>
            </note>
            <formalpara>
                <title>См. также:</title>

                <para>
                    <link linkend="fblangref-ddl-domain-alter">ALTER DOMAIN</link>, <link
                        linkend="fblangref-ddl-domain-drop">DROP DOMAIN</link>. </para>

            </formalpara>
        </section>
    </section>
    <section xml:id="fblangref-ddl-domain-alter">
        <info>
            <title>ALTER DOMAIN</title>
            <keywordset>
                <keyword>ALTER DOMAIN</keyword>
            </keywordset>
        </info>
        <indexterm>
            <primary>ALTER DOMAIN</primary>
        </indexterm>

        <formalpara>
            <title>Назначение:</title>

            <para>Изменение текущих характеристик домена или его переименование.</para>
        </formalpara>

        <formalpara>
            <title>Доступно в:</title>

            <para>DSQL, ESQL.</para>
        </formalpara>

        <formalpara>
            <title>Синтаксис:</title>
            <para>
                <programlisting>  
ALTER DOMAIN <replaceable>name</replaceable>
  [TO <replaceable>new_name</replaceable>]
  [TYPE <replaceable>&lt;datatype&gt;</replaceable>]
  [{SET DEFAULT {<replaceable>literal</replaceable> | NULL | <replaceable>&lt;context_var&gt;</replaceable>}} | DROP DEFAULT]  
  [{SET | DROP} NOT NULL]
  [{ADD [CONSTRAINT] CHECK (<replaceable>&lt;dom_condition&gt;</replaceable>)} | DROP CONSTRAINT]

<replaceable>&lt;datatype&gt;</replaceable> ::= 
    <replaceable>&lt;scalar_datatype&gt;</replaceable> | <replaceable>&lt;blob_datatype&gt;</replaceable> | <replaceable>&lt;array_datatype&gt;</replaceable>                    
                    
<replaceable>&lt;scalar_datatype&gt;</replaceable> ::=  <link xmlns:xlink="http://www.w3.org/1999/xlink" linkend="fblangref-datatypes-declare-scalar">См. Синтаксис скалярных типов данных</link>
                    
<replaceable>&lt;blob_datatype&gt;</replaceable> ::= <link xmlns:xlink="http://www.w3.org/1999/xlink" linkend="fblangref-datatypes-declare-blob">См. Синтаксис типа данных BLOB</link>          
                    
<replaceable>&lt;array_datatype&gt;</replaceable> ::= <link xmlns:xlink="http://www.w3.org/1999/xlink" linkend="fblangref-datatypes-declare-array">См. Синтаксис массивов</link>   

<replaceable>&lt;dom_condition&gt;</replaceable> ::= 
    <replaceable>&lt;val&gt;</replaceable> <replaceable>&lt;operator&gt;</replaceable> <replaceable>&lt;val&gt;</replaceable>
  | <replaceable>&lt;val&gt;</replaceable> [NOT] BETWEEN <replaceable>&lt;val&gt;</replaceable> AND <replaceable>&lt;val&gt;</replaceable>
  | <replaceable>&lt;val&gt;</replaceable> [NOT] IN (<replaceable>&lt;val&gt;</replaceable> [, <replaceable>&lt;val&gt;</replaceable> ...] | <replaceable>&lt;select_list&gt;</replaceable>)
  | <replaceable>&lt;val&gt;</replaceable> IS [NOT] NULL
  | <replaceable>&lt;val&gt;</replaceable> IS [NOT] DISTINCT <replaceable>&lt;val&gt;</replaceable>
  | <replaceable>&lt;val&gt;</replaceable> IS [NOT] {TRUE | FALSE | UNKNOWN}
  | <replaceable>&lt;val&gt;</replaceable> [NOT] CONTAINING <replaceable>&lt;val&gt;</replaceable>
  | <replaceable>&lt;val&gt;</replaceable> [NOT] STARTING [WITH] <replaceable>&lt;val&gt;</replaceable>
  | <replaceable>&lt;val&gt;</replaceable> [NOT] LIKE <replaceable>&lt;val&gt;</replaceable> [ESCAPE <replaceable>&lt;val&gt;</replaceable>]
  | <replaceable>&lt;val&gt;</replaceable> [NOT] SIMILAR TO <replaceable>&lt;val&gt;</replaceable> [ESCAPE <replaceable>&lt;val&gt;</replaceable>]
  | <replaceable>&lt;val&gt;</replaceable> <replaceable>&lt;operator&gt;</replaceable> {ALL | SOME | ANY} (<replaceable>&lt;select_list&gt;</replaceable>)
  | [NOT] EXISTS (<replaceable>&lt;select_expr&gt;</replaceable>)
  | [NOT] SINGULAR (<replaceable>&lt;select_expr&gt;</replaceable>)
  | (<replaceable>&lt;dom_condition&gt;</replaceable>)
  | NOT <replaceable>&lt;dom_condition&gt;</replaceable>
  | <replaceable>&lt;dom_condition&gt;</replaceable> OR <replaceable>&lt;dom_condition&gt;</replaceable>
  | <replaceable>&lt;dom_condition&gt;</replaceable> AND <replaceable>&lt;dom_condition&gt;</replaceable>


<replaceable>&lt;operator&gt;</replaceable> ::= 
    &lt;> | != | ^= | ~= | = | &lt; | > | &lt;= | >=
  | !&lt; | ^&lt; | ~&lt; | !> | ^> | ~>

<replaceable>&lt;val&gt;</replaceable> ::= 
    VALUE
  | <replaceable>&lt;literal&gt;</replaceable>
  | <replaceable>&lt;context_var&gt;</replaceable>
  | <replaceable>&lt;expression&gt;</replaceable>
  | NULL
  | NEXT VALUE FOR <replaceable>genname</replaceable>
  | GEN_ID(<replaceable>genname</replaceable>, <replaceable>&lt;val&gt;</replaceable>)
  | CAST(<replaceable>&lt;val&gt;</replaceable> AS <replaceable>&lt;cast_type&gt;</replaceable>)
  | (<replaceable>&lt;select_one&gt;</replaceable>)
  | func(<replaceable>&lt;val&gt;</replaceable> [, <replaceable>&lt;val&gt;</replaceable> ...])


<replaceable>&lt;cast_type&gt;</replaceable> ::=
   <replaceable>&lt;datatype&gt;</replaceable> 
  | [TYPE OF] <replaceable>domain</replaceable> 
  | TYPE OF COLUMN <replaceable>rel</replaceable>.<replaceable>col</replaceable>
                    </programlisting>
            </para>
        </formalpara>
        <para>
            <table frame="all">
                <title>Параметры оператора ALTER DOMAIN</title>
                <?dbfo keep-together='auto'?>
                <tgroup cols="2">
                    <colspec colname="c1" colnum="1" colwidth="1.2*" align="left"/>
                    <colspec colname="c2" colnum="2" colwidth="2.8*" align="justify"/>
                    <thead>
                        <row>
                            <entry align="center">Параметр</entry>
                            <entry align="center">Описание</entry>
                        </row>
                    </thead>
                    <tbody>
                        <row>
                            <entry>
                                <replaceable>name</replaceable>
                            </entry>
                            <entry>
                                <para>Имя домена.</para>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <replaceable>new_name</replaceable>
                            </entry>
                            <entry>
                                <para>Новое имя домена. Может содержать до 63 символов.</para>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <replaceable>datatype</replaceable>
                            </entry>
                            <entry>
                                <para>Тип данных SQL. </para>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <replaceable>literal</replaceable>
                            </entry>
                            <entry>
                                <para>Литерал. </para>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <replaceable>context_var</replaceable>
                            </entry>
                            <entry>
                                <para>Любая контекстная переменная, тип которой совместим с типом
                                    данных  домена.</para>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <replaceable>dom_condition</replaceable>
                            </entry>
                            <entry>
                                <para>Условие домена. </para>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <replaceable>collation</replaceable>
                            </entry>
                            <entry>
                                <para>Порядок сортировки. </para>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <replaceable>select_one</replaceable>
                            </entry>
                            <entry>
                                <para>Оператор SELECT выбирающий один столбец и возвращающий только
                                    одну строку. </para>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <replaceable>select_list</replaceable>
                            </entry>
                            <entry>
                                <para>Оператор SELECT выбирающий один столбец и возвращающий ноль и
                                    более строк.</para>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <replaceable>select_expr</replaceable>
                            </entry>
                            <entry>
                                <para>Оператор SELECT выбирающий несколько столбцов и возвращающий
                                    ноль и более строк.</para>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <replaceable>experssion</replaceable>
                            </entry>
                            <entry>
                                <para>Выражение. </para>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <replaceable>genname</replaceable>
                            </entry>
                            <entry>
                                <para>Имя последовательности (генератора). </para>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <replaceable>func</replaceable>
                            </entry>
                            <entry>
                                <para>Скалярная функция. </para>
                            </entry>
                        </row>
                    </tbody>
                </tgroup>
            </table>
        </para>

        <para>Оператор <database>ALTER DOMAIN</database> изменяет текущие характеристики домена, в
            том числе и его имя. В одном операторе <database>ALTER DOMAIN</database> можно выполнить
            любое количество изменений домена.</para>
        <indexterm>
            <primary>ALTER DOMAIN</primary>
            <secondary>TO</secondary>
        </indexterm>
        <para>Предложение TO позволяет переименовать домен. Имя домена можно изменить, если не
            существует зависимостей от этого домена, т.е. столбцов таблиц, локальных переменных и
            аргументов процедур, ссылающихся на данный домен. </para>
        <indexterm>
            <primary>ALTER DOMAIN</primary>
            <secondary>SET DEFAULT</secondary>
        </indexterm>
        <para>Предложение <database>SET DEFAULT</database> позволяет установить новое значение по
            умолчанию. Если домен уже содержал значение по умолчанию, то установка нового значения
            по умолчанию не требует предварительного удаления старого.</para>
        <indexterm>
            <primary>ALTER DOMAIN</primary>
            <secondary>DROP DEFAULT</secondary>
        </indexterm>
        <para>Предложение <database>DROP DEFAULT</database> удаляет ранее установленное для домена
            значение по умолчанию. В этом случае значением по умолчанию становится значение NULL. </para>
        <indexterm>
            <primary>ALTER DOMAIN</primary>
            <secondary>ADD [CONSTRAINT] CHECK</secondary>
        </indexterm>
        <indexterm>
            <primary>ALTER DOMAIN</primary>
            <secondary>DROP [CONSTRAINT] CHECK</secondary>
        </indexterm>
        <para>Предложение ADD [CONSTRAINT] CHECK добавляет условие ограничения домена. Если домен
            уже содержал ограничение <database>CHECK</database>, то его предварительно необходимо
            удалить с помощью предложения DROP [CONSTRAINT] CHECK. </para>
        <indexterm>
            <primary>ALTER DOMAIN</primary>
            <secondary>TYPE</secondary>
        </indexterm>
        <para>Предложение <database>TYPE</database> позволяет изменить тип домена на другой
            допустимый тип. Не допустимы любые изменения типа, которые могут привести к потере
            данных. Например, количество символов в новом типе для домена не может быть меньше, чем
            было установлено ранее.</para>
        <note>
            <para>Изменение типа не поддерживается для типа BLOB и массивов.</para>
        </note>
        <indexterm>
            <primary>ALTER DOMAIN</primary>
            <secondary>SET NOT NULL</secondary>
        </indexterm>
        <indexterm>
            <primary>ALTER DOMAIN</primary>
            <secondary>DROP NOT NULL</secondary>
        </indexterm>
        <para>Предложение <database>SET NOT NULL</database> устанавливает ограничение NOT NULL для
            домена. В этом случае для переменных и столбцах базирующихся на домене значение NULL не
            допускается. Предложение <database>DROP NOT NULL</database> удаляет ограничение NOT NULL
            для домена. </para>
        <note>
            <para>Успешная установка ограничения NOT NULL для домена происходит только после полной
                проверки данных таблиц, столбцы которых базируются на домене. Это может занять
                довольно длительное время. </para>
        </note>
        <warning>
            <para>При изменении описания домена, существующий PSQL код, может стать некорректным.
                Информация о том, как это обнаружить, находится в приложении <link
                    linkend="fblangref-appx-supp-rdb-validblr">Поле RDB$VALID_BLR</link>. </para>
        </warning>
        <section xml:id="fblangref-ddl-domain-alter-cannot">
            <title>Что не может изменить ALTER DOMAIN</title>
            <para>
                <itemizedlist spacing="compact">
                    <listitem>
                        <para>Если домен был объявлен как массив, то изменить ни его тип, ни
                            размерность нельзя. Также нет возможности изменить любой другой тип на
                            тип массив.</para>
                    </listitem>
                    <listitem>
                        <para>Не существует способа изменить сортировку по умолчанию. В этом случае
                            необходимо удалить домен и пересоздать его с новыми атрибутами.</para>
                    </listitem>
                </itemizedlist>
            </para>
        </section>
        <section xml:id="fblangref-ddl-domain-alter-who">
            <title>Кто может изменить домен?</title>

            <para>Выполнить оператор <database>ALTER DOMAIN</database> могут: <itemizedlist
                    spacing="compact">
                    <listitem>
                        <para><link linkend="fblangref-security-administrators"
                                >Администраторы</link></para>
                    </listitem>
                    <listitem>
                        <para>Владелец домена; </para>
                    </listitem>
                    <listitem>
                        <para>Пользователи с привилегией <database>ALTER ANY DOMAIN</database>.
                        </para>
                    </listitem>
                </itemizedlist>
            </para>

        </section>
        <section xml:id="fblangref-ddl-domain-alter-exapmles">
            <title>Примеры</title>

            <example>
                <title>Изменение значения по умолчанию для домена.</title>

                <para>
                    <programlisting language="sql"> 
ALTER DOMAIN CUSTNO
INTEGER DEFAULT 2000;       
                </programlisting>
                </para>
            </example>
            <example>
                <title>Переименование домена.</title>

                <para>
                    <programlisting language="sql"> 
ALTER DOMAIN D_BOOLEAN TO D_BOOL;       
                </programlisting>
                </para>
            </example>
            <example>
                <title>Удаление значения по умолчанию и добавления ограничения для домена.</title>

                <para>
                    <programlisting language="sql"> 
<![CDATA[                     
ALTER DOMAIN D_DATE
DROP DEFAULT
ADD CONSTRAINT CHECK (VALUE >= date '01.01.2000');  
]]>  
                </programlisting>
                </para>
            </example>
            <example>
                <title>Изменение ограничения домена.</title>

                <para>
                    <programlisting language="sql"> 
ALTER DOMAIN D_DATE
DROP CONSTRAINT;

ALTER DOMAIN D_DATE
ADD CONSTRAINT CHECK 
(VALUE BETWEEN date '01.01.1900' AND date '31.12.2100');     
                </programlisting>
                </para>
            </example>
            <example>
                <title>Изменение типа домена.</title>

                <para>
                    <programlisting language="sql"> 
ALTER DOMAIN FIRSTNAME
TYPE VARCHAR(50) CHARACTER SET UTF8;     
                </programlisting>
                </para>
            </example>
            <example>
                <title>Добавление ограничения NOT NULL для домена.</title>

                <para>
                    <programlisting language="sql"> 
ALTER DOMAIN FIRSTNAME SET NOT NULL;     
                </programlisting>
                </para>
            </example>
            <formalpara>
                <title>См. также:</title>

                <para>
                    <link linkend="fblangref-ddl-domain-create">CREATE DOMAIN</link>, <link
                        linkend="fblangref-ddl-domain-drop">DROP DOMAIN</link>. </para>
            </formalpara>
        </section>
    </section>
    <section xml:id="fblangref-ddl-domain-drop">
        <info>
            <title>DROP DOMAIN</title>
            <keywordset>
                <keyword>DROP DOMAIN</keyword>
            </keywordset>
        </info>
        <indexterm>
            <primary>DROP DOMAIN</primary>
        </indexterm>
        <formalpara>
            <title>Назначение:</title>

            <para>Удаление существующего домена.</para>
        </formalpara>
        <formalpara>
            <info>
                <title>Доступно в:</title>
            </info>

            <para>DSQL, ESQL.</para>
        </formalpara>

        <formalpara>
            <title>Синтаксис:</title>
            <para>
                <programlisting> 
DROP DOMAIN <replaceable>domain_name</replaceable>;                    
                </programlisting>
            </para>
        </formalpara>
        <para>
            <table frame="all">
                <title>Параметры оператора DROP DOMAIN</title>
                <?dbfo keep-together='auto'?>
                <tgroup cols="2">
                    <colspec colname="c1" colnum="1" colwidth="1.2*" align="left"/>
                    <colspec colname="c2" colnum="2" colwidth="2.8*" align="justify"/>
                    <thead>
                        <row>
                            <entry align="center">Параметр</entry>
                            <entry align="center">Описание</entry>
                        </row>
                    </thead>
                    <tbody>
                        <row>
                            <entry>
                                <replaceable>domain_name</replaceable>
                            </entry>
                            <entry>
                                <para>Имя домена.</para>
                            </entry>
                        </row>
                    </tbody>
                </tgroup>
            </table>
        </para>

        <para>Оператор <database>DROP DOMAIN</database> удаляет домен, существующий в базе данных.
            Невозможно удалить домен, на который ссылаются столбцы таблиц базы данных или если он
            был задействован в одном из PSQL модулей. Чтобы удалить такой домен, необходимо удалить
            из таблиц все столбцы, ссылающиеся на домен и удалить все ссылки на домен из PSQL
            модулей.</para>
        <section xml:id="fblangref-ddl-domain-drop-who">
            <title>Кто может удалить домен?</title>

            <para>Выполнить оператор <database>DROP DOMAIN</database> могут: <itemizedlist
                    spacing="compact">
                    <listitem>
                        <para><link linkend="fblangref-security-administrators"
                                >Администраторы</link></para>
                    </listitem>
                    <listitem>
                        <para>Владелец домена; </para>
                    </listitem>
                    <listitem>
                        <para>Пользователи с привилегией <database>DROP ANY DOMAIN</database>.
                        </para>
                    </listitem>
                </itemizedlist>
            </para>

        </section>

        <section xml:id="fblangref-ddl-domain-drop-exapmles">
            <title>Примеры</title>
            <example>
                <title>Удаление домена</title>
                <para>
                    <programlisting language="sql">
DROP DOMAIN COUNTRYNAME;                    
                </programlisting>
                </para>
            </example>
            <formalpara>
                <title>См. также:</title>

                <para>
                    <link linkend="fblangref-ddl-domain-create">CREATE DOMAIN</link>, <link
                        linkend="fblangref-ddl-domain-alter">ALTER DOMAIN</link>. </para>

            </formalpara>
        </section>
    </section>
</section>
